/**
 * Simple javascript Date manipulation, parsing and printing library.
 * version 0.2.0
 * Kane Cohen [KaneCohen@gmail.com] | https://github.com/KaneCohen
 * @preserve
 */
(function(){"use strict";function a(a){return a.replace(/(?:(?:^|\n)\s+|\s+(?:$|\n))/g,"")}function b(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])}function c(a){return Math.abs(Math.round(a))}function d(a,b,c){var d=a+"";for("undefined"==typeof c&&(c="0");d.length<b;)d=c+d;return d}function e(a,b,c){var d=a+"";for("undefined"==typeof c&&(c="0");d.length<b;)d+=c;return d}function f(a){return a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0),a}function g(a,b){var c,d,e;return b||(b=!1),date=a.toDate(),date.setHours(0,0,0),e=0===a.lang().week.weekStart?date.getDay():date.getDay()||7,b?(c=new Date(date.getFullYear(),0,1),date.setDate(date.getDate()+a.lang().week.yearStart-e),d=Math.floor((date-c+1)/6048e5)):(date.setDate(date.getDate()+a.lang().week.yearStart-e),c=new Date(date.getFullYear(),0,1),d=Math.ceil((date-c+1)/6048e5)),d}function h(a){return(a.toDate().getDay()+7-a.lang().week.weekStart)%7}function i(a){date=a.toDate();var b=date.getDate(),c=date.getFullYear(),d=new Date(c,0,1,12,0,0),e=new Date(c,date.getMonth(),b,12,0,0);return Math.round((e-d)/864e5)+1}function j(a,b){return new Date(b,a,0).getDate()}function k(a,b,c){return b instanceof Date?new Date(b):b instanceof r?new Date(b.toDate()):"string"==typeof b?p(a,b,c):"number"==typeof b?new Date(b):Array.isArray(b)?q(a,b,c):new Date}function l(a){var b=a.match(B),c={tags:[],format:[],output:[],regex:[],groups:[]};return b?(s=0,b.forEach(function(b,d){var e=/\w+/.exec(b)[0];c.tags[d]=b,c.format[d]=e,c.regex[d]=I[e],c.groups[d]=z[e[0]]||null;var f=a.indexOf(b);0===f?c.output[s]=null:(c.output[s]=a.slice(0,f),c.output[++s]=null),a=a.slice(f+b.length),s++})):c.output=[a],c}function m(a,b){var c=C.exec(b),d="",e=c.length;if(c[0]){for(s=0,e=E.dates.length;e>s;s++)if(E.dates[s][1].exec(b)){d=E.dates[s][0]+(c[6]||" ");break}for(s=0,e=E.times.length;e>s;s++)if(E.times[s][1].exec(b)){d+=E.times[s][0];break}}return b.match(F)&&(d+="{Z}"),n(a,b,d)}function n(a,b,c){var d=l(c);return o(a,b,d)}function o(a,b,c){var d,e,g,h,i,j,k=0,l=null,m=new Date;if(!c.format)return null;f(m);for(j in c.format)d=b.substr(k),h=d.match(c.regex[j]),h&&(g=h[0],e="set"+c.groups[j],k+=d.indexOf(g)+String(g).length,"setTimezone"==e?(i=g.match(G),l=60*i[1]*60+60*i[2],l="-"==i[0]?-l:l):("setMonth"==e&&g--,m[e](g)));return null!==l?new Date(m.getTime()-(u+60*l*1e3)):a.isUTC()?new Date(m.getTime()-u):m}function p(a,b,c){return"undefined"==typeof c?m(a,b):n(a,b,c)}function q(a,b){var c=[0,0,0,0,0,0,0];c=c.map(function(a,c){return b[c]||a});var d=new Date(c[0],c[1],c[2],c[3],c[4],c[5],c[6]);return a._utcMode?new Date(d.getTime()-u):d}function r(a,c){b(this,x),this._d=k(this,a,c)}var s,t="undefined"!=typeof module&&module.exports,u=60*(new Date).getTimezoneOffset()*1e3,v={millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month:2592e6,year:31536e6},w={ms:"millisecond",milliseconds:"millisecond",seconds:"second",s:"second",minutes:"minute",m:"minute",hours:"hour",h:"hour",days:"day",d:"day",weeks:"week",w:"week",months:"month",M:"month",years:"year",y:"year",Y:"year"},x={_d:null,_utcMode:!1,_maxDiff:2592e3,_offset:u,_lang:"en"},y={en:{relativeTime:{prefixAgo:null,prefixFromNow:null,suffixAgo:"ago",suffixFromNow:"from now",seconds:"just now",minute:"{prefix} [a minute] {suffix}",minutes:"{prefix} {diff} [minutes] {suffix}",hour:"{prefix} [an hour] {suffix}",hours:"{prefix} {diff} [hours] {suffix}",day:"{prefix} [a day] {suffix}",days:"{prefix} {diff} [days] {suffix}",month:"{prefix} [a month] {suffix}",months:"{prefix} [months] {diff}",year:"{prefix} [a year] {suffix}",years:"{prefix} {diff} [years] {suffix}",wordDelimiter:" ",format:function(a,b){return a.year()===b.year()?"{D} {MMMM}":"{D} {MMMM} {YYYY}"}},pluralizer:function(a){return 1==a?0:1},calendar:{sameElse:"{D} {MMMM} {YYYY}",sameDay:"Today at {hh}:{mm}",nextDay:"Tomorrow at {hh}:{mm}",nextWeek:"{wwww} at {hh}:{mm}",lastDay:"Yesterday at {hh}:{mm}",lastWeek:"Last {wwww} at {hh}:{mm}"},week:{weekStart:0,yearStart:4},weekdays:function(a,b,c){c||(c=!1);var d={nominative:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Satruday","Sunday"],brief:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"]};return c?d.brief[a]:d.nominative[a]},months:function(a,b,c){c||(c=!1);var d={nominative:[null,"January","February","March","April","May","June","July","August","September","October","November","December"],brief:[null,"Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]};return c?d.brief[a]:d.nominative[a]}}},z={S:"Milliseconds",s:"Seconds",m:"Minutes",H:"Hours",h:"Hours",D:"Date",M:"Month",Y:"FullYear",Z:"Timezone"},A={},B=/{(\w+)}/gi,C=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,D="{YYYY}-{MM}-{DD}T{hh}:{mm}:{ss}{Z}",E={dates:[["{YYYY}-{MM}-{DD}",/\d{4}-\d{2}-\d{2}/],["{YYYY}-{DDD}",/\d{4}-\d{3}/]],times:[["{HH}:{mm}:{ss}",/(T| )\d\d:\d\d:\d\d/],["{HH}:{mm}",/(T| )\d\d:\d\d/],["{HH}",/(T| )\d\d/]]},F=/Z|[\+\-]\d\d:?\d\d/gi,G=/([\+\-]|\d\d)/gi,H="[0-9]*['a-z\\u00A0-\\u05FF\\u0700-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]+|[\\u0600-\\u06FF\\/]+(\\s*?[\\u0600-\\u06FF]+){1,2}",I={S:/\d{1,3}/,SS:/\d{3}/,s:/\d{1,2}/,ss:/\d{2}/,m:/\d{1,2}/,mm:/\d{2}/,H:/\d{1,2}/,HH:/\d{2}/,h:/\d{1,2}/,hh:/\d{2}/,a:/am|pm/,A:/AM|PM/,D:/\d{1,2}/,DD:/\d{2}/,DDD:/\d{1,3}/,DDDD:/\d{3}/,M:/\d{1,2}/,MM:/\d{2}/,MMM:/\w{2}/,MMMM:H,w:/\d{1}/,ww:/\d{2}/,www:H,wwww:H,W:/\d{1,2}/,WW:/\d{2}/,WWW:/\d{1,2}/,WWWW:/\d{2}/,Y:/\d{2}/,YY:/\d{2}/,YYYY:/\d{4}/,Z:/Z|[\+\-]\d\d:?\d\d/,ZZ:/Z|[\+\-]\d\d:?\d\d/},J={S:function(){return this.milliseconds()/10},SS:function(){return d(this.milliseconds()/100,3)},SSS:function(){return this.milliseconds()},s:function(){return this.seconds()},ss:function(){return d(this.seconds(),2)},m:function(){return this.minutes()},mm:function(){return d(this.minutes(),2)},H:function(){return this.hours()},HH:function(){return d(this.hours(),2)},h:function(){return this.hours()%12||12},hh:function(){return d(this.hours()%12||12,2)},a:function(){return this.hours()>11?"pm":"am"},A:function(){return this.hours()>11?"PM":"AM"},D:function(){return this.date()},DD:function(){return d(this.date(),2)},DDD:function(){return this.dayOfYear()},DDDD:function(){return d(this.dayOfYear(),3)},M:function(){return this.month()+1},MM:function(){return d(this.month()+1,2)},MMM:function(a){return this.lang().months(this.month()+1,a,!0)},MMMM:function(a){return this.lang().months(this.month()+1,a)},w:function(){return h(this)},ww:function(){return h(this)},www:function(a){return this.lang().weekdays(h(this),a,!0)},wwww:function(a){return this.lang().weekdays(h(this),a)},W:function(){return g(this)},WW:function(){return d(g(this),2)},WWW:function(){return g(this,!0)},WWWW:function(){return d(g(this,!0),2)},Y:function(){return this.year().substring(2)},YY:function(){return this.year().substring(2)},YYYY:function(){return this.year()},Z:function(){var a=this.isUTC()?0:this._offset/1e3/60,b=a>0?"-":"+";return b+=Math.abs(a)<6e3?"0":"",e(b+Math.abs(a/60),5)},ZZ:function(){var a=this.isUTC()?0:this._offset/1e3/60,b=a>0?"-":"+";return b+=Math.abs(a)<6e3?"0":"",b=e(b+Math.abs(a/60),5),[b.slice(0,3),":",b.slice(3)].join("")}};r.prototype={fromNow:function(a,b){a="undefined"==typeof a?new r:new r(a);var c=this.diff(a,"all"),d=c.relative,e=this.lang().relativeTime,f=c.strict.s<0?!0:!1;return d.s<this._maxDiff?d.s<45&&this.humanize(e.seconds,d.s,f)||d.s<90&&this.humanize(e.minute,1,f)||d.m<45&&this.humanize(e.minutes,d.m,f)||d.m<90&&this.humanize(e.hour,1,f)||d.h<24&&this.humanize(e.hours,d.h,f)||d.h<42&&this.humanize(e.day,1,f)||d.d<31&&this.humanize(e.days,d.d,f)||d.M<12&&this.humanize(e.months,d.m,f)||d.y<1.5&&this.humanize(e.year,d.y,f)||d.y>1.5&&this.humanize(e.years,d.y,f)||this.humanize(e.years,d.y,f):(b||(b=e.format),"function"==typeof b&&(b=b(this,a)),this.format(b))},diff:function(a,b,d){b=w[b]||b,"undefined"==typeof d&&(d=!0);var e,f=k(this,a),g=this._d.getTime()-f.getTime(),h=g/1e3,i=h/60,j=i/60,l=j/24,m=l/30,n=l/365;switch(b){case"second":e=h;break;case"minute":e=i;break;case"hour":e=j;break;case"day":e=l;break;case"month":e=m;break;case"year":e=n;break;case"all":return{relative:{S:c(g),s:c(h),m:c(i),h:c(j),d:c(l),M:c(m),y:c(n)},strict:{S:g,s:h,m:i,h:j,d:l,M:m,y:n}};default:e=g}return d?Math.abs(Math.round(e)):e},humanize:function(b,c,d){var e=this.lang().relativeTime;b=this.choice(b,c);var f=d?e.prefixAgo:e.prefixFromNow,g=d?e.suffixAgo:e.suffixFromNow,h=this.format(b.replace(/{diff}/i,c).replace(/{prefix}/i,f||"").replace(/{suffix}/i,g||""));return a(h)},choice:function(a,b){var c=a.match(/\[(.+)\]/);if(!c)return a;var d=c[1].split("|"),e=d.length>1?d[this.lang().pluralizer(b)]:d[0];return a=a.replace(c[0],e)},format:function(a){a||(a=D);var b,c="";for("undefined"==typeof A[a]?(b=A[a]=l(a),s=0,b.output.forEach(function(c,d){if(null===c){var e=J[b.format[s]];"function"==typeof a&&(e=a(e)||e),b.output[d]=e,s++}})):b=A[a],s=0;s<b.output.length;s++)c+="function"==typeof b.output[s]?b.output[s].call(this,a):b.output[s];return c},calendar:function(){var a=this.diff((new r).startOf("day"),"days",!1),b=-6>a?"sameElse":-1>a?"lastWeek":0>a?"lastDay":1>a?"sameDay":2>a?"nextDay":7>a?"nextWeek":"sameElse";return this.format(this.lang().calendar[b])},startOf:function(a){switch(a){case"year":this._d.setMonth(0);case"month":this._d.setDate(1);case"week":this.weekday(0);case"day":this._d.setHours(0);case"hour":this._d.setMinutes(0);case"minute":this._d.setSeconds(0);case"second":this._d.setMilliseconds(0)}return this},endOf:function(a){return this.startOf(a).add(1,a).sub(1,"ms")},add:function(a,b){return this._d.setMilliseconds(this._d.getMilliseconds()+this.duration(a,b)),this},sub:function(a,b){return this._d.setMilliseconds(this._d.getMilliseconds()-this.duration(a,b)),this},duration:function(a,b){return b||(b="ms"),a*(v[b]||v[w[b]])},isValid:function(){return!!this._d},parse:function(a,b){return this._d=k(this,a,b),this},get:function(a,b){switch(b!==!0&&(a=w[a]||a),a){case"millisecond":return this.isUTC()?this._d.getUTCMilliseconds():this._d.getMilliseconds();case"second":return this.isUTC()?this._d.getUTCSeconds():this._d.getSeconds();case"minute":return this.isUTC()?this._d.getUTCMinutes():this._d.getMinutes();case"hour":return this.isUTC()?this._d.getUTCHours():this._d.getHours();case"day":return this.isUTC()?this._d.getUTCDay():this._d.getDay();case"date":return this.isUTC()?this._d.getUTCDate():this._d.getDate();case"month":return this.isUTC()?this._d.getUTCMonth():this._d.getMonth();case"year":return this.isUTC()?this._d.getUTCFullYear():this._d.getFullYear();default:return this._d.getTime()}},set:function(a,b){switch(a){case"millisecond":return this.milliseconds(b);case"second":return this.seconds(b);case"minute":return this.minutes(b);case"hour":return this.hours(b);case"date":return this.date(b);case"month":return this.month(b);case"year":return this.year(b)}return this},now:function(){return this._d=new Date,this},timestamp:function(a){var b=this.get("time",!0);return null==a?b:this.add(a-b,"ms")},unix:function(a){return null==a?Math.floor(this.timestamp()/1e3):this.timestamp(1e3*a)},milliseconds:function(a){var b=this.get("millisecond",!0);return null==a?b:this.add(a-b,"ms")},ms:function(a){return this.milliseconds(a)},seconds:function(a){var b=this.get("second",!0);return null==a?b:this.add(a-b,"s")},minutes:function(a){var b=this.get("minute",!0);return null==a?b:this.add(a-b,"m")},hours:function(a){var b=this.get("hour",!0);return null==a?b:this.add(a-b,"h")},day:function(a){var b=this.get("day",!0);return null==a?b:this.add(a-b,"d")},date:function(a){var b=this.get("date",!0);if(null==a)return b;var c=Math.min(this.date(),j(this.year(),a)),d=c-b;return d>=0?this._d.setDate(a):this.endOf("month").add(d,"d"),this},week:function(a,b){var c=g(this,b);return null==a?c:this.add(7*(a-c),"d")},weekday:function(a){var b=h(this);return null==a?b:this.add(a-b,"d")},isoWeekday:function(a){return null==a?this.day()||7:this.day(this.day()%7?a:a-7)},dayOfYear:function(a){var b=i(this);return null==a?b:this.add(a-b,"d")},month:function(a){if(null==a)return this.get("month",!0);var b=Math.min(this.date(),j(this.year(),a));return this._d.setMonth(a,b),this},year:function(a){var b=this.get("year",!0);return null==a?b:this.add(a-b,"y")},yesterday:function(){return this.sub(1,"d").startOf("day")},today:function(){return this.startOf("day")},tomorrow:function(){return this.add(1,"d").startOf("day")},utc:function(){return this._utcMode=!0,this},isUTC:function(){return this._utcMode},local:function(){return this._utcMode=!1,this},clone:function(){return new r(this._d)},lang:function(a,b){return a&&y[a]?(this._lang=a,y[a]):a&&!y[a]&&b?(this._lang=a,void(y[a]=b)):y[this._lang]||y.en},toDate:function(){return this.isUTC()?new Date(this._d):this._d},toString:function(){return this.format()}},b(r,{now:function(){return new r},unix:function(a){return new r(1e3*a)},yesterday:function(){return(new r).yesterday()},today:function(){return(new r).today()},tomorrow:function(){return(new r).tomorrow()},utc:function(a,b){return(new r).utc().parse(a,b)},lang:function(a,b){if(!y[a]&&b)y[a]=b,x._lang=a;else if(y[a]||b)x._lang=a;else try{require("../lang/"+a)}catch(c){}return x._lang}}),t?module.exports=r:"function"==typeof define&&define.amd&&define("charon",function(){return r})}).call(this);